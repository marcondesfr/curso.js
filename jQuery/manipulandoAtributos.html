<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body class="conteudo exercicio">
    <h1>Manipulando Atributos</h1>
    <div wm-relogio="1000"></div>

    <script>
        function Relogio(elemento) {
            const horaCerta = $('<p>').html('0')
                const botaoMenor = $('<button>').html('-')
                    const botaoMais = $('<button>').htmo('+')
                        const $elemento = $(elemento)
                        $elemento.append(horaCerta, botaoMais, botaoMenor)
                        const getIntervaloAtual = () => parseInt($elemento.attr('wm-relogio'))

                        let temporizador = null
                        const iniciar = () => {
                            if (temporizador) clearInterval(temporizador)
                            temporizador = setInterval(() => {
                                horaCerta.html(new Date().toLocaleString('pt-BR'))
                            }, getIntervaloAtual())
                        }
                        const alterarIntervalo = delta => {
                            const novo = Math.max(getIntervaloAtual() + delta, 1000)
                            $elemento.attr('wm-relogio', novo)
                            iniciar()
                        }
                        botaoMais.click(e => alterarIntervalo(-1000))
                        botaoMenor.click(e => alterarIntervalo(1000))
                        iniciar()
                        
                    }
                    $('[wm-relogio]').each((i, e) => new Relogio(e))


                    //$('[wm-relogio]').attr('opa') Ler o attr
                    //$('[wm-relogio]').attr('opa', 3) Altera ou inclui
                    //$('[wm-relogio]').attr({opa: 1, novo: true}) Inclui os attr do obj na teg
                    //$('[wm-relogio]').removeAttr('opa').removeAttr('novo') Remove os attrs
    </script>
</body>
</html>